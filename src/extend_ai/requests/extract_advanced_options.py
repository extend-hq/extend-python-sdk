# This file was auto-generated by Fern from our API Definition.

import typing

import typing_extensions
from ..core.serialization import FieldMetadata
from ..types.extract_advanced_options_array_citation_strategy import ExtractAdvancedOptionsArrayCitationStrategy
from ..types.extract_advanced_options_excel_sheet_selection_strategy import (
    ExtractAdvancedOptionsExcelSheetSelectionStrategy,
)
from .array_strategy import ArrayStrategyParams
from .excel_sheet_range import ExcelSheetRangeParams
from .extract_advanced_options_review_agent import ExtractAdvancedOptionsReviewAgentParams
from .extract_chunking_options import ExtractChunkingOptionsParams
from .page_ranges import PageRangesParams


class ExtractAdvancedOptionsParams(typing_extensions.TypedDict):
    model_reasoning_insights_enabled: typing_extensions.NotRequired[
        typing_extensions.Annotated[bool, FieldMetadata(alias="modelReasoningInsightsEnabled")]
    ]
    """
    Whether to enable model reasoning insights.
    """

    advanced_multimodal_enabled: typing_extensions.NotRequired[
        typing_extensions.Annotated[bool, FieldMetadata(alias="advancedMultimodalEnabled")]
    ]
    """
    Whether to enable advanced multimodal features.
    """

    citations_enabled: typing_extensions.NotRequired[
        typing_extensions.Annotated[bool, FieldMetadata(alias="citationsEnabled")]
    ]
    """
    Whether to enable citations in the output.
    """

    array_citation_strategy: typing_extensions.NotRequired[
        typing_extensions.Annotated[
            ExtractAdvancedOptionsArrayCitationStrategy, FieldMetadata(alias="arrayCitationStrategy")
        ]
    ]
    """
    Granularity for array citations. This requires citationsEnabled=true and a base processor version that supports property-level array citations (extraction_performance â‰¥ 4.4.0).
    """

    array_strategy: typing_extensions.NotRequired[
        typing_extensions.Annotated[ArrayStrategyParams, FieldMetadata(alias="arrayStrategy")]
    ]
    """
    Strategy for handling large arrays in documents.
    """

    chunking_options: typing_extensions.NotRequired[
        typing_extensions.Annotated[ExtractChunkingOptionsParams, FieldMetadata(alias="chunkingOptions")]
    ]
    excel_sheet_ranges: typing_extensions.NotRequired[
        typing_extensions.Annotated[typing.Sequence[ExcelSheetRangeParams], FieldMetadata(alias="excelSheetRanges")]
    ]
    """
    Ranges of sheet indices to extract from Excel documents.
    """

    excel_sheet_selection_strategy: typing_extensions.NotRequired[
        typing_extensions.Annotated[
            ExtractAdvancedOptionsExcelSheetSelectionStrategy, FieldMetadata(alias="excelSheetSelectionStrategy")
        ]
    ]
    """
    Strategy for selecting sheets from Excel documents.
    """

    page_ranges: typing_extensions.NotRequired[
        typing_extensions.Annotated[PageRangesParams, FieldMetadata(alias="pageRanges")]
    ]
    review_agent: typing_extensions.NotRequired[
        typing_extensions.Annotated[ExtractAdvancedOptionsReviewAgentParams, FieldMetadata(alias="reviewAgent")]
    ]
    """
    Configuration for the review agent that analyzes extraction results.
    When enabled, each field in the output metadata will include a `reviewAgentScore` (1-5)
    and may include additional `insights` of type `issue` or `review_summary` to help identify
    fields that may need manual review.
    
    To learn more, view the [Review Agent Documentation](https://docs.extend.ai/product/extraction/review-agent)
    """
